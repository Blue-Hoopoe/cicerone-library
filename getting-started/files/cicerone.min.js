function Cicerone(e){var t,n,s,i,o=-1,a=this,r={};this.steps=e||[],this.start=function(n){void 0===t?n<=0||n>e.length?console&&console.warn("Given step '"+n+"' is invalid. Presentation has "+this.steps.length+" levels."):((t=document.createElement("div")).className="cicerone curtain",t.setAttribute("style","z-index:"+Cicerone.settings["z-index"]),document.getElementsByTagName("body")[0].appendChild(t),setTimeout(function(){t.className+=" open"},1),Cicerone.settings["transition-duration"]=function(){var e=t.css("transition-duration")||"1s";e.length;return e="ms"===e.slice(-2)?e.slice(0,-2):1e3*e.slice(0,-1)}(),void 0===n&&(n=1),this.makeStep(Math.ceil(n))):console&&console.warn("The presentation is already running. Use 'makeStep' function to navigate.")},this.makeStep=function(e){if(t)if((o+=Math.ceil(e))<0||o+1>this.steps.length)this.end();else{c(),(n=document.querySelector(this.steps[o].selector)).className+=" cicerone presentation";var a=s=n.getAttribute("style")||"",r=this.steps[o].css?[this.steps[o].css]:[];"static"===n.css("position")&&r.push("position: relative;"),r.push("z-index: "+(Cicerone.settings["z-index"]+1)+";");for(var p=0;p<r.length;p++)";"!==r[p].slice(-1)&&(r[p]+=";"),a+=r[p];n.setAttribute("style",a),i=l(),n.appendChild(i),n.scrollIntoView()}else console&&console.warn("The presentation has ended or was not initialized. Please invoke 'start' before using 'makeStep' function.")},this.end=function(){void 0!==t?(c(),t&&(t.className="cicerone curtain"),setTimeout(function(){for(var e=document.querySelectorAll(".cicerone"),t=0;t<e.length;t++)e[t].outerHTML=""},Cicerone.settings["transition-duration"]),t=void 0,o=-1,i=void 0,n=void 0,s=void 0):console&&console.warn("The presentation has ended or was not initialized. Use 'start' function to initialize new one.")};var c=function(){if(n){n.style=s;var e=n.getClasses();e.splice(e.indexOf("cicerone"),1),e.splice(e.indexOf("presentation"),1),n.setClasses(e)}i&&(i.outerHTML="")},l=function(){var e=document.createElement("div");e.className="cicerone dialog placement-"+(a.steps[o].placement?a.steps[o].placement:"left");var t;!function(e){r[e]?t=r[e]:r[e]=t=document.querySelector(a.steps[o].template).innerHTML}(r[a.steps[o].template]);var n=a.steps[o].variables;if(n){t=t.replace(/\s+(?=[^\{\{]*\}\})/g,"");for(var s=Object.keys(n),i=0;i<s.length;i++)t=t.replace("{{"+[s[i]]+"}}",n[s[i]])}return e.innerHTML=t,function(t,n){for(var s=0;s<t.length;s++)for(var i=e.querySelectorAll("[cicerone-"+t[s]+"]"),o=n[s],r=0;r<i.length;r++)!function(e){i[r].addEventListener("click",function(){a.makeStep(e)})}(o)}(["next","back","exit"],[1,-1,a.steps.length]),e}}Element.prototype.css=function(e){return window.getComputedStyle(this).getPropertyValue(e)},Element.prototype.getClasses=function(){return this.className.split(" ")},Element.prototype.setClasses=function(e){if("string"!=typeof e){for(var t="",n=0;n<e.length;n++)t+=e[n]+" ";this.className=t.slice(0,-1)}else this.className=e},Cicerone.settings={"z-index":2e4};